syntax = "proto3";

//go:generate protoc -I . --go_out=plugins=grpc:. message.proto

package message;
import "google/protobuf/any.proto";
import "google/protobuf/timestamp.proto";

message ResponseMetadata {
   uint32 total = 1;
   uint32 page =  2;
   uint32 perPage = 3;
}

message Response {
    string entity = 1;
    string id = 2;
    ResponseMetadata meta = 3;
    google.protobuf.Any Data = 4;
}

// TODO should be design
//message MetaFilters {
//    repeated MetaFilter and = 1;
//    repeated MetaFilter or = 2;
//}

message MetaFilter {
    string name = 1;
    string opt = 2;
    string value = 3;
}

message MetaSorts {
    string name = 1;
    int32 direction = 2;
}

message RequestMetadata {
    uint32 page = 1;
    uint32 perPage = 2;
    repeated MetaSorts sorts = 3;
    repeated MetaFilter filters = 4;
}

message Request {
    string orderId = 1;
    string itemId = 2;
    google.protobuf.Timestamp time = 3;
    RequestMetadata meta = 4;
    google.protobuf.Any Data = 5;
}

message ErrorDetails {
    repeated ValidationErr validation = 1;
}

message ValidationErr {
    string field = 1;
    string desc = 2;
}