syntax = "proto3";

package ordersrv;

import "general/message.proto";
import "google/protobuf/any.proto";

service OrderService {
    rpc OrderRequestsHandler(message.Request) returns (message.Response);

//    rpc NewOrder (OrderPaymentRequest) returns (OrderResponse);
//    rpc SellerApprovalPending (ApprovalRequest) returns (Response);
//    rpc ShipmentDetail (ShipmentDetailRequest) returns (Response);
//    rpc BuyerCancel (BuyerCancelRequest) returns (Response);
//    rpc ShipmentDelivered (ShipmentDeliveredRequest) returns (Response);
//    rpc ShipmentDeliveryDelayed (ShipmentDeliveryDelayedRequest) returns (Response);
//    rpc ReturnShipmentDeliveryDelayed (ReturnShipmentDeliveryDelayedRequest) returns (Response);
//    rpc ShipmentCanceled (ShipmentCanceledRequest) returns (Response);
//    rpc ReturnShipmentCanceled (ReturnShipmentCanceledRequest) returns (Response);
//    rpc ShipmentDeliveryProblem (ShipmentDeliveryProblemRequest) returns (Response);
//    rpc ReturnShipmentDeliveryProblem (ReturnShipmentDeliveryProblemRequest) returns (Response);
//    rpc ShipmentSuccess (ShipmentSuccessRequest) returns (Response);
//    rpc ReturnShipmentPending (ReturnShipmentPendingRequest) returns (Response);
//    rpc ReturnShipmentDetail (ReturnShipmentDetailRequest) returns (Response);
//    rpc ReturnShipmentDelivered (ReturnShipmentDeliveredRequest) returns (Response);
//    rpc ReturnShipmentSuccess (ReturnShipmentSuccessRequest) returns (Response);
//    rpc PayToBuyerSuccess (PayToBuyerSuccessRequest) returns (Response);
//    rpc PayToSellerSuccess (PayToSellerSuccessRequest) returns (Response);
//    rpc PayToMarketSuccess (PayToMarketSuccessRequest) returns (Response);
}

message NewOrderRequest {
    Buyer buyer = 1;
    Amount amount = 2;
    repeated Item items = 3;
}

message Amount {
    uint64  total           = 1;
    uint64  payable         = 2;
    uint64  discount        = 3;
    uint64  shipmentTotal   = 4;
    string  currency        = 5;
    string  paymentMethod   = 6;
    string  paymentOption   = 7;
    Voucher voucher         = 8;
}

message Voucher {
    uint64  amount  = 1;
    string  code    = 2;
    google.protobuf.Any details = 3;
}

message Item {
    string inventoryId = 1;
    string title = 2;
    string brand = 3;
    string categories = 4;
    string warranty = 5;
    string image = 6;
    bool returnable = 7;
    string sellerId = 8;
    Attributes attributes = 9;
    PriceInfo price = 10;
    ShippingSpec shipment = 11;
}

message Buyer {
    string firstName = 1;
    string lastName = 2;
    string mobile = 3;
    string email = 4;
    string nationalId = 5;
    string ip = 6;
    string gender = 7;
    FinanceInfo finance = 9;
    Address shippingAddress = 10;
}

message Attributes {
    int32 quantity = 1;
    string width = 2;
    string height = 3;
    string length = 4;
    string weight = 5;
    string color = 6;
    string materials = 7;
    google.protobuf.Any extra = 8;
}

message FinanceInfo {
    string iban = 1;
    string cardNumber = 2;
    string accountNumber = 3;
    string bankName = 4;
}

message Address {
    string address = 1;
    string phone = 2;
    string country = 3;
    string city = 4;
    string province = 5;
    string neighbourhood = 6;
    string lat = 7;
    string long = 8;
    string zipCode = 9;
}

message PriceInfo {
    uint64 unit = 1;
    uint64 total = 2;
    uint64 payable = 3;
    uint64 discount = 4;
    uint64 sellerCommission = 5;
    string currency = 6;
}

message ShippingSpec {
    string carrierName = 1;
    string carrierProduct = 2;
    string carrierType = 3;
    uint64 shippingAmount = 4;
    uint64 voucherAmount = 5;
    string currency = 6;
    int32 reactionTime = 7;
    int32 shippingTime = 8;
    int32 returnTime = 9;
    string details = 10;
}

message Event {
    string actor = 1;
    string action = 2;
    google.protobuf.Any data = 3;
}

// SellerApprovalPending Start
message ApprovalRequest {
    bool approval = 1;
    string reason = 2;
}

//message Response {
//    string orderNumber = 1;
//    string status = 2;
//    string message = 3;
//}
// SellerApprovalPending End

message ShipmentDetailRequest {
    string orderNumber = 1;
    string shipmentProvider = 2;
    string shipmentTrackingNumber = 3;
    string description = 4;
    string image = 5;
}

message BuyerCancelRequest {
    string reason = 1;
}

message ShipmentDeliveredRequest {
//    string orderNumber = 1;
}

message ReturnShipmentDeliveredRequest {
    string operator = 1;
    string reason = 2;
}

message ShipmentDeliveryDelayedRequest {
//    string orderNumber = 1;
}

message ReturnShipmentDeliveryDelayedRequest {
//    string orderNumber = 1;
}

message ShipmentCanceledRequest {
//    string orderNumber = 1;
    string reason = 1;
    string operator = 2;
}

message ReturnShipmentCanceledRequest {
//    string orderNumber = 1;
    string reason = 1;
}

message ShipmentDeliveryProblem {
//    string orderNumber = 1;
    string reason = 1;
}

message ShipmentDeliveryProblemRequest {
//    string orderNumber = 1;
    string reason = 1;
}

message ReturnShipmentDeliveryProblemRequest {
//    string orderNumber = 1;
    string reason = 1;
}

message ShipmentSuccessRequest {
//    string orderNumber = 1;
}

message ReturnShipmentSuccessRequest {
//    string orderNumber = 1;
}

message ReturnShipmentPendingRequest {
//    string orderNumber = 1;
    string reason = 1;
    string operator = 2;
}

message ReturnShipmentDetailRequest {
//    string orderNumber = 1;
    string shipmentProvider = 1;
    string shipmentTrackingNumber = 2;
    string description = 3;
    string image = 4;
}

message PayToBuyerSuccessRequest {
//    string orderNumber = 1;
    string description = 1;
}

message PayToSellerSuccessRequest {
//    string orderNumber = 1;
    string description = 1;
}

message PayToMarketSuccessRequest {
//    string orderNumber = 1;
    string description = 1;
}